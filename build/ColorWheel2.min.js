!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ColorWheel2=e()}(this,function(){"use strict";var t=function(t,e,i){this.options=i,this.el=t||document.createElement("canvas"),this.ctx=e||this.el.getContext("2d")};t.prototype.setSize=function(t){this.el.width=this.el.height=t},t.prototype.update=function(){this.setSize(this.options.size),this.render()},t.prototype.safe=function(t){this.ctx.save(),t.call(this),this.ctx.restore()},t.prototype.path=function(t){this.ctx.beginPath(),t.call(this),this.ctx.closePath()},t.prototype.clear=function(){var t=this.options.size;this.ctx.clearRect(0,0,t,t)},t.prototype.center=function(){var t=this.options.center;this.ctx.translate(t,t)},t.prototype.renderFn=function(){},t.prototype.render=function(){this.clear(),this.safe(this.renderFn)};var H=2*Math.PI,h=Math.PI/180,M=Math.PI/6,w=Math.PI/3,c=Math.PI/2,e=Math.sqrt(3),f=e/2,s=e/4,l=function(e){function t(t){e.call(this,null,null,t)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.renderFn=function(){var e=this,t=this.options,i=t.radius,r=t.spectreThickness,o=t.triangleRadius;this.center(),this.path(function(){this.ctx.arc(0,0,i,0,H);var t=this.ctx.createRadialGradient(0,0,0,0,0,i);t.addColorStop(0,"#000"),t.addColorStop(1,"#555"),this.ctx.fillStyle=t,this.ctx.fill()}),this.path(function(){this.ctx.arc(0,0,i-2*r,0,H),this.ctx.fillStyle="#444",this.ctx.fill()});var a=i-r/2;this.ctx.lineWidth=r;for(var s=function(t){e.path(function(){this.ctx.arc(0,0,a,t*h,(t+1.5)*h),this.ctx.strokeStyle="hsl("+-t+",100%,50%)",this.ctx.stroke()})},n=0;n<360;n++)s(n);this.path(function(){this.ctx.arc(0,0,o,0,H),this.ctx.fillStyle="rgba(68,68,68,0.25)",this.ctx.fill()})},t}(t),u=function(a){function t(t){a.call(this,null,null,t)}return a&&(t.__proto__=a),((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.update=function(){var t=this.options,e=t.vertices,i=t.triangleRadius,r=this.ctx.createLinearGradient(e[2].x,e[2].y,i/4,i*s),o=this.ctx.createLinearGradient(e[1].x,e[0].y,e[0].x,e[0].y);r.addColorStop(0,"white"),r.addColorStop(1,"rgba(255,255,255,0)"),o.addColorStop(0,"black"),o.addColorStop(1,"transparent"),this.brightnessGradient=o,this.saturationGradient=r,a.prototype.update.call(this)},t.prototype.renderFn=function(){var t=this.brightnessGradient,e=this.saturationGradient,i=this.options,r=i.color.HSL,o=i.hueRad,a=i.vertices,s=i.triangleBorder;this.center(),this.ctx.rotate(-o),this.path(function(){this.ctx.moveTo(a[0].x,a[0].y),this.ctx.lineTo(a[1].x,a[1].y),this.ctx.lineTo(a[2].x,a[2].y)}),this.ctx.fillStyle="hsl("+r[0]+",100%,50%)",this.ctx.fill(),this.ctx.fillStyle=t,this.ctx.fill(),this.safe(function(){this.ctx.globalCompositeOperation="lighter",this.ctx.fillStyle=e,this.ctx.fill()}),this.ctx.strokeStyle="whitesmoke",this.ctx.lineWidth=s,this.ctx.stroke()},t}(t),d=function(e){function t(t){e.call(this,null,null,t)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.renderFn=function(){var t=this.options,e=t.color,i=t.hueRad,r=t.cursor,o=r.x,a=r.y,s=t.triangleBorder;this.center(),this.ctx.rotate(-i),this.path(function(){this.ctx.arc(o,a,5,0,H),this.ctx.strokeStyle="whitesmoke",this.ctx.lineWidth=s,this.ctx.fillStyle=e.css,this.ctx.stroke(),this.ctx.fill()})},t}(t),p=function(a){function t(t,e){for(var i=[],r=arguments.length-2;0<r--;)i[r]=arguments[r+2];var o=null;"string"==typeof t&&(t=document.querySelector(t)),t instanceof CanvasRenderingContext2D?(o=t,t=null):t instanceof HTMLCanvasElement||(t=null),a.call(this,t,o,e),this.layers=i}return a&&(t.__proto__=a),((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.update=function(){this.layers.forEach(function(t){return t.update()}),a.prototype.update.call(this)},t.prototype.renderFn=function(){var e=this;this.layers.forEach(function(t){return e.ctx.drawImage(t.el,0,0)})},t}(t);function r(t){return e=0,i=1,r=t,Math.max(e,Math.min(r,i));var e,i,r}function o(t){return(t-=360*(t/360|0))<0&&(t+=360),Math.round(t)}function n(t,e){var i=(2-t)*e;return[t=t*e/(i<=1?i:2-i)||0,e=i/2]}function y(t){var e=t.changedTouches?t.changedTouches[0]:t;return{x:e.clientX,y:e.clientY}}var i={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},a={};Object.keys(i).forEach(function(t){a[i[t]]=t});var g=function(t,e,i){this.HSV=[0,0,0],this.HSL=[0,0,0],this.RGB=[0,0,0],this.setHSV(t,e,i)};g.prototype.isDark=function(){var t=this.RGB;return.299*t[0]+.587*t[1]+.114*t[2]<=127.5},g.prototype.getName=function(){return a[this.hex]||this.hex},g.prototype.setHSV=function(t,e,i){this.HSV[0]=o(t),this.HSV[1]=r(e),this.HSV[2]=r(i),this.updateHSL(),this.updateCSS(),this.updateRGB(),this.updateNUM(),this.updateHEX()},g.prototype.setHSL=function(t,e,i){this.HSL[0]=o(t),this.HSL[1]=r(e),this.HSL[2]=r(i),this.updateHSV(),this.updateCSS(),this.updateRGB(),this.updateNUM(),this.updateHEX()},g.prototype.setRGB=function(t,e,i){this.RGB[0]=255&t,this.RGB[1]=255&e,this.RGB[2]=255&i,this.updateHSVfromRGB(),this.updateHSL(),this.updateCSS(),this.updateNUM(),this.updateHEX()},g.prototype.setHEX=function(t){if(t=parseInt(t.replace("#",""),16),isNaN(t))throw new TypeError("Color: invalid hex code");this.setNUM(t)},g.prototype.setName=function(t){(t=t.replace(/\s+/g,"").toLowerCase())in i?this.setHEX(i[t]):this.setHEX(t)},g.prototype.setNUM=function(t){this.num=16777215&t,this.updateHEX(),this.updateRGBfromNUM(),this.updateHSVfromRGB(),this.updateHSL(),this.updateCSS()},g.prototype.setHue=function(t){this.HSV[0]=this.HSL[0]=o(t),this.updateCSS(),this.updateRGB(),this.updateNUM(),this.updateHEX()},g.prototype.setSV=function(t,e){this.setHSV(this.HSV[0],t,e)},g.prototype.updateHSV=function(){var t=this.HSL,e=t[0],i=t[1],r=t[2],o=n(i,s),a=o[0],s=o[1];this.HSV[0]=e,this.HSV[1]=a,this.HSV[2]=r},g.prototype.updateHSVfromRGB=function(){var t=this.RGB,e=this.HSV,i=t[0],r=t[1],o=t[2],a=Math.min(i,r,o),s=Math.max(i,r,o),n=s-a;if(s!==a)switch(s){case i:e[0]=60*(r-o)/n+(r<o?360:0);break;case r:e[0]=60*(o-i)/n+120;break;case o:e[0]=60*(i-r)/n+240}e[1]=0==s?0:1-a/s,e[2]=s/255},g.prototype.updateHSL=function(){var t=this.HSV,e=t[0],i=n(t[1],t[2]),r=i[0],o=i[1];this.HSL[0]=e,this.HSL[1]=r,this.HSL[2]=o},g.prototype.updateCSS=function(){var t=this.HSL,e=t[0],i=t[1],r=t[2];this.css="hsl("+e+","+100*i+"%,"+100*r+"%)"},g.prototype.updateRGB=function(){var i=this.RGB,t=this.HSV,e=t[0],r=t[1],o=t[2],a=(1-r)*o,s=e%60*(o-a)/60,n=a+s,h=o-s;[[o,n,a],[h,o,a],[a,o,n],[a,h,o],[n,a,o],[o,a,h]][Math.floor(e/60%6)].forEach(function(t,e){return i[e]=255*t&255})},g.prototype.updateRGBfromNUM=function(){var t=this.RGB,e=this.num;t[0]=e>>16,t[1]=e>>8&255,t[2]=255&e},g.prototype.updateNUM=function(){var t=this.RGB,e=t[0],i=t[1],r=t[2];this.num=(e<<16)+(i<<8)+r},g.prototype.updateHEX=function(){this.hex="#"+this.num.toString(16).padStart(6,"0")};var b=function(t,e,i){var r=new g(0,1,1);this.options={vertices:[0,0,0].map(function(){return{x:0,y:0}}),cursor:{x:0,y:0},hueRad:0,color:r},this.color=r,this.callback="function"==typeof i?i:function(){};var o,a,s,n=new l(this.options),h=new u(this.options),c=new d(this.options),f=new p(t,this.options,n,h,c);this.layers={background:n,triangle:h,cursor:c,output:f},this.domElement=this.layers.output.el,this.setSize(e),o=this.domElement,a="touchstart mousedown",s=this.dragStart.bind(this),a.split(" ").forEach(function(t){return o.addEventListener(t,s)})};b.prototype.setSize=function(t){this.size=t=+t;var e=t/2,i=e,r=i/4,o=i-3*r/4,a=1.5*o,s=i/32,n=this.options.vertices;n[0].x=o,n[1].x=n[2].x=-o/2,n[1].y=o*f,n[2].y=-n[1].y;var h=2*n[1].y;Object.assign(this.options,{size:t,center:e,radius:i,spectreThickness:r,triangleRadius:o,triangleHeight:a,triangleBorder:s,triangleSide:h}),this.updateCursor(),this.layers.output.update()},b.prototype.setColor=function(t){for(var e,i,r=[],o=arguments.length-1;0<o--;)r[o]=arguments[o+1];switch(t=t.toUpperCase()){case"HUE":i="setHue";break;case"NAME":i="setName";break;default:i="set"+t}if(!this.color[i])throw new TypeError("ColorWheel: Unsupported color model ("+t+")");(e=this.color)[i].apply(e,r),this.options.hueRad=this.color.HSV[0]*h,this.updateCursor(),"SV"!=t&&this.layers.triangle.render(),this.layers.cursor.render(),this.layers.output.render(),this.callback.call(this,3,i)},b.prototype.updateCursor=function(){var t=this.color.HSV,e=this.options,i=e.cursor,r=e.vertices,o=e.triangleHeight,a=e.triangleSide;if(t[1]){var s=t[1]*w,n=t[2]*o/Math.cos(s-M),h=c-s;i.x=n*Math.cos(h)+r[2].x,i.y=-n*Math.sin(h)-r[2].y}else i.x=r[1].x,i.y=r[1].y-t[2]*a},b.prototype.relate=function(t){var e=this.domElement.getBoundingClientRect(),i=this.options.center;return t.x=t.x-e.left-i,t.y=-t.y+e.top+i,t},b.prototype.getHandler=function(t){var e,i=Math.hypot(t.x,t.y),r=this.options,o=r.triangleRadius,a=r.radius;return o<=i&&i<=a?e=this.rotateWheel:this.moveCursor(t,!0)&&(e=this.moveCursor),e?[e.name,e.bind(this)]:[void 0,void 0]},b.prototype.rotateWheel=function(t){var e=t.x,i=t.y,r=Math.acos(e/Math.hypot(e,i));i<0&&(r=H-r),this.options.hueRad=r,this.color.setHue(Math.round(r/h)),this.layers.triangle.render(),this.layers.cursor.render(),this.layers.output.render()},b.prototype.moveCursor=function(t,e){var i,r,o=t.x,a=t.y,s=this.options,n=s.hueRad,h=s.vertices,c=s.triangleSide,f=s.triangleHeight,l=Math.hypot(o,a);if(0!=n){var u=Math.acos(o/l);a<0&&(u=H-u);var d=u-n;o=l*Math.cos(d),a=l*Math.sin(d)}var p=o-h[1].x,y=a-h[2].y,g=-a+h[1].y,b=Math.hypot(p,y),v=Math.hypot(p,g),m=y/b,S=g/Math.hypot(p,g);if(e)return.5<=m&&m<=1&&.5<=S&&S<=1&&0<=p;if(p<0)i=0,r=y/c;else{var x=Math.acos(m),k=Math.acos(S);i=w<k&&k%M?v*Math.cos(k-w)/c:x/w,r=w<x&&x%M?b*Math.cos(x-w)/c:b*Math.cos(x-M)/f}this.color.setSV(i,r),this.updateCursor(),this.layers.cursor.render(),this.layers.output.render()},b.prototype.dragStart=function(t){var e=this;if(!("button"in t&&0!==t.button)){var i=this.relate(y(t)),r=this.getHandler(i),o=r[0],a=r[1];if(a){t.preventDefault(),a(i),this.callback.call(this,0,o);var s=document.body,n=!!t.changedTouches,h=n?"touchmove":"mousemove",c=n?"touchend":"mouseup",f=n?"touchcancel":"mouseleave",l=function(t){a(e.relate(y(t))),e.callback.call(e,1,o)},u=function(){s.removeEventListener(h,l),s.removeEventListener(c,u),s.removeEventListener(f,u),e.callback.call(e,2,o)};s.addEventListener(h,l),s.addEventListener(c,u),s.addEventListener(f,u)}}};return b.version="1.0.1",b});