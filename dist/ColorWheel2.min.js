!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ColorWheel2=e()}(this,function(){"use strict";function r(t){return function(t,e,i){return Math.max(t,Math.min(i,e))}(0,1,t)}function a(t){return(t-=360*(t/360|0))<0&&(t+=360),Math.round(t)}function d(t){var e=function(t){return Array.isArray(t.changedTouches)}(t)?t.changedTouches[0]:t;return{x:e.clientX,y:e.clientY}}var e={},i={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};Object.keys(i).forEach(function(t){e[i[t]]=t});var f=(t.prototype.isDark=function(){var t=this.RGB;return.299*t[0]+.587*t[1]+.114*t[2]<=127.5},t.prototype.getName=function(){return e[this.hex]||this.hex},t.prototype.setHSV=function(t,e,i){this.HSV[0]=a(t),this.HSV[1]=r(e),this.HSV[2]=r(i),this.updateHSL(),this.updateCSS(),this.updateRGB(),this.updateNUM(),this.updateHEX()},t.prototype.setHSL=function(t,e,i){this.HSL[0]=a(t),this.HSL[1]=r(e),this.HSL[2]=r(i),this.updateHSV(),this.updateCSS(),this.updateRGB(),this.updateNUM(),this.updateHEX()},t.prototype.setRGB=function(t,e,i){this.RGB[0]=255&t,this.RGB[1]=255&e,this.RGB[2]=255&i,this.updateHSVfromRGB(),this.updateHSL(),this.updateCSS(),this.updateNUM(),this.updateHEX()},t.prototype.setHEX=function(t){var e=parseInt(t.replace("#",""),16);if(isNaN(e))throw new TypeError("Color: invalid hex code");this.setNUM(e)},t.prototype.setName=function(t){(t=t.replace(/\s+/g,"").toLowerCase())in i?this.setHEX(i[t]):this.setHEX(t)},t.prototype.setNUM=function(t){this.num=16777215&t,this.updateHEX(),this.updateRGBfromNUM(),this.updateHSVfromRGB(),this.updateHSL(),this.updateCSS()},t.prototype.setHue=function(t){this.HSV[0]=this.HSL[0]=a(t),this.updateCSS(),this.updateRGB(),this.updateNUM(),this.updateHEX()},t.prototype.setSV=function(t,e){this.setHSV(this.HSV[0],t,e)},t.prototype.updateHSV=function(){var t=this.HSL,e=t[0],i=function(t,e){return[t=2*(t*=e<.5?e:1-e)/(e+=t),e]}(t[1],t[2]),r=i[0],a=i[1];this.HSV[0]=e,this.HSV[1]=r,this.HSV[2]=a},t.prototype.updateHSVfromRGB=function(){var t=this.RGB,e=this.HSV,i=t[0],r=t[1],a=t[2],o=Math.min(i,r,a),n=Math.max(i,r,a),s=n-o;if(n!==o)switch(n){case i:e[0]=60*(r-a)/s+(r<a?360:0);break;case r:e[0]=60*(a-i)/s+120;break;case a:e[0]=60*(i-r)/s+240}e[1]=0==n?0:1-o/n,e[2]=n/255},t.prototype.updateHSL=function(){var t=this.HSV,e=t[0],i=function(t,e){var i=(2-t)*e;return[t=t*e/(i<=1?i:2-i)||0,e=i/2]}(t[1],t[2]),r=i[0],a=i[1];this.HSL[0]=e,this.HSL[1]=r,this.HSL[2]=a},t.prototype.updateCSS=function(){var t=this.HSL,e=t[0],i=t[1],r=t[2];this.css="hsl("+e+","+100*i+"%,"+100*r+"%)"},t.prototype.updateRGB=function(){var t,i=this.RGB,e=this.HSV,r=e[0],a=e[1],o=e[2],n=(1-a)*o,s=r%60*(o-n)/60,f=n+s,h=o-s;switch(Math.floor(r/60%6)){case 0:t=[o,f,n];break;case 1:t=[h,o,n];break;case 2:t=[n,o,f];break;case 3:t=[n,h,o];break;case 4:t=[f,n,o];break;case 5:t=[o,n,h]}t.forEach(function(t,e){return i[e]=255*t&255})},t.prototype.updateRGBfromNUM=function(){var t=this.RGB,e=this.num;t[0]=e>>16,t[1]=e>>8&255,t[2]=255&e},t.prototype.updateNUM=function(){var t=this.RGB,e=t[0],i=t[1],r=t[2];this.num=(e<<16)+(i<<8)+r},t.prototype.updateHEX=function(){this.hex="#"+this.num.toString(16).padStart(6,"0")},t);function t(t,e,i){this.num=0,this.hex="#000000",this.css="",this.HSV=[0,0,0],this.HSL=[0,0,0],this.RGB=[0,0,0],this.setHSV(t,e,i)}var x=2*Math.PI,h=Math.PI/180,w=Math.PI/6,M=Math.PI/3,l=Math.PI/2,o=Math.sqrt(3),u=o/2,n=o/4,s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function c(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var p=(y.prototype.setSize=function(t){this.el.width=this.el.height=t},y.prototype.update=function(){this.setSize(this.options.size),this.render()},y.prototype.output=function(t){t.drawImage(this.el,0,0)},y.prototype.render=function(){this.clear(),this.safe(this.renderFn.bind(this))},y.prototype.safe=function(t){this.ctx.save(),t(),this.ctx.restore()},y.prototype.path=function(t){this.ctx.beginPath(),t(),this.ctx.closePath()},y.prototype.clear=function(){var t=this.options.size;this.ctx.clearRect(0,0,t,t)},y.prototype.center=function(){var t=this.options.center;this.ctx.translate(t,t)},y);function y(t,e,i){if(this.options=i,this.el=t||document.createElement("canvas"),null===(e=e||this.el.getContext("2d")))throw new Error("Couldn't initialize canvas context");this.ctx=e}var g,b=(c(v,g=p),v.prototype.renderFn=function(){var t=this.options,e=t.radius,i=t.spectreThickness,r=t.triangleRadius,a=this.ctx;this.center(),this.path(function(){a.arc(0,0,e,0,x);var t=a.createRadialGradient(0,0,0,0,0,e);t.addColorStop(0,"#000"),t.addColorStop(1,"#555"),a.fillStyle=t,a.fill()}),this.path(function(){a.arc(0,0,e-2*i,0,x),a.fillStyle="#444",a.fill()});var o=e-i/2;a.lineWidth=i;for(var n=function(t){s.path(function(){a.arc(0,0,o,t*h,(t+1.5)*h),a.strokeStyle="hsl("+-t+",100%,50%)",a.stroke()})},s=this,f=0;f<360;f++)n(f);this.path(function(){a.arc(0,0,r,0,x),a.fillStyle="rgba(68,68,68,0.25)",a.fill()})},v);function v(t){return g.call(this,null,null,t)||this}var m,S=(c(k,m=p),k.prototype.renderFn=function(){var t=this.options,e=t.color,i=t.hueRad,r=t.cursor,a=r.x,o=r.y,n=t.triangleBorder,s=this.ctx;this.center(),s.rotate(-i),this.path(function(){s.arc(a,o,5,0,x),s.strokeStyle="whitesmoke",s.lineWidth=n,s.fillStyle=e.css,s.stroke(),s.fill()})},k);function k(t){return m.call(this,null,null,t)||this}var H,R=(c(E,H=p),E.prototype.getDomElement=function(){return this.el},E.prototype.update=function(){this.layers.forEach(function(t){return t.update()}),H.prototype.update.call(this)},E.prototype.renderFn=function(){var e=this;this.layers.forEach(function(t){return t.output(e.ctx)})},E);function E(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var a=this,o=null;return"string"==typeof t&&(t=document.querySelector(t)),t instanceof CanvasRenderingContext2D?(o=t,t=null):t instanceof HTMLCanvasElement||(t=null),(a=H.call(this,t,o,e)||this).layers=i,a}var C,L=(c(G,C=p),G.prototype.update=function(){var t=this.options,e=t.vertices,i=t.triangleRadius,r=this.ctx.createLinearGradient(e[2].x,e[2].y,i/4,i*n),a=this.ctx.createLinearGradient(e[1].x,e[0].y,e[0].x,e[0].y);r.addColorStop(0,"white"),r.addColorStop(1,"rgba(255,255,255,0)"),a.addColorStop(0,"black"),a.addColorStop(1,"transparent"),this.brightnessGradient=a,this.saturationGradient=r,C.prototype.update.call(this)},G.prototype.renderFn=function(){var t=this.ctx,e=this.brightnessGradient,i=this.saturationGradient,r=this.options,a=r.color.HSL,o=r.hueRad,n=r.vertices,s=r.triangleBorder;this.center(),t.rotate(-o),this.path(function(){t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y),t.lineTo(n[2].x,n[2].y)}),t.fillStyle="hsl("+a[0]+",100%,50%)",t.fill(),t.fillStyle=e,t.fill(),this.safe(function(){t.globalCompositeOperation="lighter",t.fillStyle=i,t.fill()}),t.strokeStyle="whitesmoke",t.lineWidth=s,t.stroke()},G);function G(t){return C.call(this,null,null,t)||this}function V(t,e,i){void 0===i&&(i=function(){});var r=new f(0,1,1);this.options={vertices:[0,0,0].map(function(){return{x:0,y:0}}),cursor:{x:0,y:0},hueRad:0,color:r},this.color=r,this.callback=i;var a=new b(this.options),o=new L(this.options),n=new S(this.options),s=new R(t,this.options,a,o,n);this.layers={background:a,triangle:o,cursor:n,output:s},this.domElement=this.layers.output.getDomElement(),this.setSize(e),function(e,t,i){t.split(" ").forEach(function(t){return e.addEventListener(t,i)})}(this.domElement,"touchstart mousedown",this.dragStart.bind(this))}return V.prototype.setSize=function(t){var e=t/2,i=e,r=i/4,a=i-3*r/4,o=1.5*a,n=i/32,s=this.options.vertices;s[0].x=a,s[1].x=s[2].x=-a/2,s[1].y=a*u,s[2].y=-s[1].y;var f=2*s[1].y;Object.assign(this.options,{size:t,center:e,radius:i,spectreThickness:r,triangleRadius:a,triangleHeight:o,triangleBorder:n,triangleSide:f}),this.updateCursor(),this.layers.output.update()},V.prototype.update=function(){this.options.hueRad=this.color.HSV[0]*h,this.updateCursor(),this.layers.triangle.render(),this.layers.cursor.render(),this.layers.output.render(),this.callback.call(this,3,"update")},V.prototype.updateCursor=function(){var t=this.color.HSV,e=this.options,i=e.cursor,r=e.vertices,a=e.triangleHeight,o=e.triangleSide;if(t[1]){var n=t[1]*M,s=t[2]*a/Math.cos(n-w),f=l-n;i.x=s*Math.cos(f)+r[2].x,i.y=-s*Math.sin(f)-r[2].y}else i.x=r[1].x,i.y=r[1].y-t[2]*o},V.prototype.relate=function(t){var e=this.domElement.getBoundingClientRect(),i=this.options.center;return t.x=t.x-e.left-i,t.y=-t.y+e.top+i,t},V.prototype.getHandler=function(t){var e=Math.hypot(t.x,t.y),i=this.options,r=i.triangleRadius,a=i.radius,o=void 0;return r<=e&&e<=a?o=this.rotateWheel:this.moveCursor(t,!0)&&(o=this.moveCursor),o?[o.name,o.bind(this)]:null},V.prototype.rotateWheel=function(t){var e=t.x,i=t.y,r=Math.acos(e/Math.hypot(e,i));i<0&&(r=x-r),this.options.hueRad=r,this.color.setHue(Math.round(r/h)),this.layers.triangle.render(),this.layers.cursor.render(),this.layers.output.render()},V.prototype.moveCursor=function(t,e){var i,r,a=t.x,o=t.y,n=this.options,s=n.hueRad,f=n.vertices,h=n.triangleSide,l=n.triangleHeight,u=Math.hypot(a,o);if(0!=s){var c=Math.acos(a/u);o<0&&(c=x-c);var d=c-s;a=u*Math.cos(d),o=u*Math.sin(d)}var p=a-f[1].x,y=o-f[2].y,g=-o+f[1].y,b=Math.hypot(p,y),v=Math.hypot(p,g),m=y/b,S=g/Math.hypot(p,g);if(e)return.5<=m&&m<=1&&.5<=S&&S<=1&&0<=p;if(p<0)i=0,r=y/h;else{var k=Math.acos(m),H=Math.acos(S);i=M<H&&H%w?v*Math.cos(H-M)/h:k/M,r=M<k&&k%w?b*Math.cos(k-M)/h:b*Math.cos(k-w)/l}this.color.setSV(i,r),this.updateCursor(),this.layers.cursor.render(),this.layers.output.render()},V.prototype.dragStart=function(t){var e=this;if(!("button"in t&&0!==t.button)){var i=this.relate(d(t)),r=this.getHandler(i);if(r){var a=r[0],o=r[1];t.preventDefault(),o(i),this.callback(0,a);var n=document.body,s="changedTouches"in t,f=s?"touchmove":"mousemove",h=s?"touchend":"mouseup",l=s?"touchcancel":"mouseleave",u=function(t){o(e.relate(d(t))),e.callback(1,a)},c=function(){n.removeEventListener(f,u),n.removeEventListener(h,c),n.removeEventListener(l,c),e.callback(2,a)};n.addEventListener(f,u),n.addEventListener(h,c),n.addEventListener(l,c)}}},V.version="1.2.0",V});