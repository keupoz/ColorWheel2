!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ColorWheel2=e()}(this,function(){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function t(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var e=(i.prototype.setSize=function(t){this.el.width=this.el.height=t},i.prototype.update=function(){this.setSize(this.options.size),this.render()},i.prototype.output=function(t){t.drawImage(this.el,0,0)},i.prototype.render=function(){this.clear(),this.safe(this.renderFn.bind(this))},i.prototype.safe=function(t){this.ctx.save(),t(),this.ctx.restore()},i.prototype.path=function(t){this.ctx.beginPath(),t(),this.ctx.closePath()},i.prototype.clear=function(){var t=this.options.size;this.ctx.clearRect(0,0,t,t)},i.prototype.center=function(){var t=this.options.center;this.ctx.translate(t,t)},i);function i(t,e,i){this.options=i,this.el=t||document.createElement("canvas"),this.ctx=e||this.el.getContext("2d")}var o,x=2*Math.PI,h=Math.PI/180,w=Math.PI/6,M=Math.PI/3,l=Math.PI/2,a=Math.sqrt(3),c=a/2,n=a/4,f=(t(s,o=e),s.prototype.renderFn=function(){var t=this.options,e=t.radius,i=t.spectreThickness,r=t.triangleRadius,o=this.ctx;this.center(),this.path(function(){o.arc(0,0,e,0,x);var t=o.createRadialGradient(0,0,0,0,0,e);t.addColorStop(0,"#000"),t.addColorStop(1,"#555"),o.fillStyle=t,o.fill()}),this.path(function(){o.arc(0,0,e-2*i,0,x),o.fillStyle="#444",o.fill()});var a=e-i/2;o.lineWidth=i;for(var n=function(t){s.path(function(){o.arc(0,0,a,t*h,(t+1.5)*h),o.strokeStyle="hsl("+-t+",100%,50%)",o.stroke()})},s=this,f=0;f<360;f++)n(f);this.path(function(){o.arc(0,0,r,0,x),o.fillStyle="rgba(68,68,68,0.25)",o.fill()})},s);function s(t){return o.call(this,null,null,t)||this}var u,d=(t(p,u=e),p.prototype.update=function(){var t=this.options,e=t.vertices,i=t.triangleRadius,r=this.ctx.createLinearGradient(e[2].x,e[2].y,i/4,i*n),o=this.ctx.createLinearGradient(e[1].x,e[0].y,e[0].x,e[0].y);r.addColorStop(0,"white"),r.addColorStop(1,"rgba(255,255,255,0)"),o.addColorStop(0,"black"),o.addColorStop(1,"transparent"),this.brightnessGradient=o,this.saturationGradient=r,u.prototype.update.call(this)},p.prototype.renderFn=function(){var t=this.ctx,e=this.brightnessGradient,i=this.saturationGradient,r=this.options,o=r.color.HSL,a=r.hueRad,n=r.vertices,s=r.triangleBorder;this.center(),t.rotate(-a),this.path(function(){t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y),t.lineTo(n[2].x,n[2].y)}),t.fillStyle="hsl("+o[0]+",100%,50%)",t.fill(),t.fillStyle=e,t.fill(),this.safe(function(){t.globalCompositeOperation="lighter",t.fillStyle=i,t.fill()}),t.strokeStyle="whitesmoke",t.lineWidth=s,t.stroke()},p);function p(t){return u.call(this,null,null,t)||this}var y,b=(t(g,y=e),g.prototype.renderFn=function(){var t=this.options,e=t.color,i=t.hueRad,r=t.cursor,o=r.x,a=r.y,n=t.triangleBorder,s=this.ctx;this.center(),s.rotate(-i),this.path(function(){s.arc(o,a,5,0,x),s.strokeStyle="whitesmoke",s.lineWidth=n,s.fillStyle=e.css,s.stroke(),s.fill()})},g);function g(t){return y.call(this,null,null,t)||this}var v,m=(t(S,v=e),S.prototype.getDomElement=function(){return this.el},S.prototype.update=function(){this.layers.forEach(function(t){return t.update()}),v.prototype.update.call(this)},S.prototype.renderFn=function(){var e=this;this.layers.forEach(function(t){return t.output(e.ctx)})},S);function S(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var o=this,a=null;return"string"==typeof t&&(t=document.querySelector(t)),t instanceof CanvasRenderingContext2D?(a=t,t=null):t instanceof HTMLCanvasElement||(t=null),(o=v.call(this,t,a,e)||this).layers=i,o}function k(t){return function(t,e,i){return Math.max(t,Math.min(i,e))}(0,1,t)}function H(t){return(t-=360*(t/360|0))<0&&(t+=360),Math.round(t)}function R(t){var e=t.changedTouches,i=e?e[0]:t;return{x:i.clientX,y:i.clientY}}var E={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},C={};Object.keys(E).forEach(function(t){C[E[t]]=t});var L=(G.prototype.isDark=function(){var t=this.RGB;return.299*t[0]+.587*t[1]+.114*t[2]<=127.5},G.prototype.getName=function(){return C[this.hex]||this.hex},G.prototype.setHSV=function(t,e,i){this.HSV[0]=H(t),this.HSV[1]=k(e),this.HSV[2]=k(i),this.updateHSL(),this.updateCSS(),this.updateRGB(),this.updateNUM(),this.updateHEX()},G.prototype.setHSL=function(t,e,i){this.HSL[0]=H(t),this.HSL[1]=k(e),this.HSL[2]=k(i),this.updateHSV(),this.updateCSS(),this.updateRGB(),this.updateNUM(),this.updateHEX()},G.prototype.setRGB=function(t,e,i){this.RGB[0]=255&t,this.RGB[1]=255&e,this.RGB[2]=255&i,this.updateHSVfromRGB(),this.updateHSL(),this.updateCSS(),this.updateNUM(),this.updateHEX()},G.prototype.setHEX=function(t){var e=parseInt(t.replace("#",""),16);if(isNaN(e))throw new TypeError("Color: invalid hex code");this.setNUM(e)},G.prototype.setName=function(t){(t=t.replace(/\s+/g,"").toLowerCase())in E?this.setHEX(E[t]):this.setHEX(t)},G.prototype.setNUM=function(t){this.num=16777215&t,this.updateHEX(),this.updateRGBfromNUM(),this.updateHSVfromRGB(),this.updateHSL(),this.updateCSS()},G.prototype.setHue=function(t){this.HSV[0]=this.HSL[0]=H(t),this.updateCSS(),this.updateRGB(),this.updateNUM(),this.updateHEX()},G.prototype.setSV=function(t,e){this.setHSV(this.HSV[0],t,e)},G.prototype.updateHSV=function(){var t=this.HSL,e=t[0],i=function(t,e){return[t=2*(t*=e<.5?e:1-e)/(e+=t),e]}(t[1],t[2]),r=i[0],o=i[1];this.HSV[0]=e,this.HSV[1]=r,this.HSV[2]=o},G.prototype.updateHSVfromRGB=function(){var t=this.RGB,e=this.HSV,i=t[0],r=t[1],o=t[2],a=Math.min(i,r,o),n=Math.max(i,r,o),s=n-a;if(n!==a)switch(n){case i:e[0]=60*(r-o)/s+(r<o?360:0);break;case r:e[0]=60*(o-i)/s+120;break;case o:e[0]=60*(i-r)/s+240}e[1]=0==n?0:1-a/n,e[2]=n/255},G.prototype.updateHSL=function(){var t=this.HSV,e=t[0],i=function(t,e){var i=(2-t)*e;return[t=t*e/(i<=1?i:2-i)||0,e=i/2]}(t[1],t[2]),r=i[0],o=i[1];this.HSL[0]=e,this.HSL[1]=r,this.HSL[2]=o},G.prototype.updateCSS=function(){var t=this.HSL,e=t[0],i=t[1],r=t[2];this.css="hsl("+e+","+100*i+"%,"+100*r+"%)"},G.prototype.updateRGB=function(){var t,i=this.RGB,e=this.HSV,r=e[0],o=e[1],a=e[2],n=(1-o)*a,s=r%60*(a-n)/60,f=n+s,h=a-s;switch(Math.floor(r/60%6)){case 0:t=[a,f,n];break;case 1:t=[h,a,n];break;case 2:t=[n,a,f];break;case 3:t=[n,h,a];break;case 4:t=[f,n,a];break;case 5:t=[a,n,h]}t.forEach(function(t,e){return i[e]=255*t&255})},G.prototype.updateRGBfromNUM=function(){var t=this.RGB,e=this.num;t[0]=e>>16,t[1]=e>>8&255,t[2]=255&e},G.prototype.updateNUM=function(){var t=this.RGB,e=t[0],i=t[1],r=t[2];this.num=(e<<16)+(i<<8)+r},G.prototype.updateHEX=function(){this.hex="#"+this.num.toString(16).padStart(6,"0")},G);function G(t,e,i){this.HSV=[0,0,0],this.HSL=[0,0,0],this.RGB=[0,0,0],this.setHSV(t,e,i)}function V(t,e,i){void 0===i&&(i=function(){});var r=new L(0,1,1);this.options={vertices:[0,0,0].map(function(){return{x:0,y:0}}),cursor:{x:0,y:0},hueRad:0,color:r},this.color=r,this.callback=i;var o=new f(this.options),a=new d(this.options),n=new b(this.options),s=new m(t,this.options,o,a,n);this.layers={background:o,triangle:a,cursor:n,output:s},this.domElement=this.layers.output.getDomElement(),this.setSize(e),function(e,t,i){t.split(" ").forEach(function(t){return e.addEventListener(t,i)})}(this.domElement,"touchstart mousedown",this.dragStart.bind(this))}return V.prototype.setSize=function(t){this.size=t=+t;var e=t/2,i=e,r=i/4,o=i-3*r/4,a=1.5*o,n=i/32,s=this.options.vertices;s[0].x=o,s[1].x=s[2].x=-o/2,s[1].y=o*c,s[2].y=-s[1].y;var f=2*s[1].y;Object.assign(this.options,{size:t,center:e,radius:i,spectreThickness:r,triangleRadius:o,triangleHeight:a,triangleBorder:n,triangleSide:f}),this.updateCursor(),this.layers.output.update()},V.prototype.setColor=function(t){for(var e,i,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];switch(t){case"HUE":i="setHue";break;case"NAME":i="setName";break;default:i="set"+t}if(!this.color[i])throw new TypeError("ColorWheel: Unsupported color model ("+t+")");(e=this.color)[i].apply(e,r),this.options.hueRad=this.color.HSV[0]*h,this.updateCursor(),"SV"!=t&&this.layers.triangle.render(),this.layers.cursor.render(),this.layers.output.render(),this.callback.call(this,3,i)},V.prototype.updateCursor=function(){var t=this.color.HSV,e=this.options,i=e.cursor,r=e.vertices,o=e.triangleHeight,a=e.triangleSide;if(t[1]){var n=t[1]*M,s=t[2]*o/Math.cos(n-w),f=l-n;i.x=s*Math.cos(f)+r[2].x,i.y=-s*Math.sin(f)-r[2].y}else i.x=r[1].x,i.y=r[1].y-t[2]*a},V.prototype.relate=function(t){var e=this.domElement.getBoundingClientRect(),i=this.options.center;return t.x=t.x-e.left-i,t.y=-t.y+e.top+i,t},V.prototype.getHandler=function(t){var e,i=Math.hypot(t.x,t.y),r=this.options,o=r.triangleRadius,a=r.radius;return o<=i&&i<=a?e=this.rotateWheel:this.moveCursor(t,!0)&&(e=this.moveCursor),e?[e.name,e.bind(this)]:[void 0,void 0]},V.prototype.rotateWheel=function(t){var e=t.x,i=t.y,r=Math.acos(e/Math.hypot(e,i));i<0&&(r=x-r),this.options.hueRad=r,this.color.setHue(Math.round(r/h)),this.layers.triangle.render(),this.layers.cursor.render(),this.layers.output.render()},V.prototype.moveCursor=function(t,e){var i,r,o=t.x,a=t.y,n=this.options,s=n.hueRad,f=n.vertices,h=n.triangleSide,l=n.triangleHeight,c=Math.hypot(o,a);if(0!=s){var u=Math.acos(o/c);a<0&&(u=x-u);var d=u-s;o=c*Math.cos(d),a=c*Math.sin(d)}var p=o-f[1].x,y=a-f[2].y,b=-a+f[1].y,g=Math.hypot(p,y),v=Math.hypot(p,b),m=y/g,S=b/Math.hypot(p,b);if(e)return.5<=m&&m<=1&&.5<=S&&S<=1&&0<=p;if(p<0)i=0,r=y/h;else{var k=Math.acos(m),H=Math.acos(S);i=M<H&&H%w?v*Math.cos(H-M)/h:k/M,r=M<k&&k%w?g*Math.cos(k-M)/h:g*Math.cos(k-w)/l}this.color.setSV(i,r),this.updateCursor(),this.layers.cursor.render(),this.layers.output.render()},V.prototype.dragStart=function(t){var e=this;if(!("button"in t&&0!==t.button)){var i=this.relate(R(t)),r=this.getHandler(i),o=r[0],a=r[1];if(a){t.preventDefault(),a(i),this.callback(0,o);var n=document.body,s="changedTouches"in t,f=s?"touchmove":"mousemove",h=s?"touchend":"mouseup",l=s?"touchcancel":"mouseleave",c=function(t){a(e.relate(R(t))),e.callback(1,o)},u=function(){n.removeEventListener(f,c),n.removeEventListener(h,u),n.removeEventListener(l,u),e.callback(2,o)};n.addEventListener(f,c),n.addEventListener(h,u),n.addEventListener(l,u)}}},V.version="1.1.0",V});